<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../img/logo.png">
  
  <title>Manifest files - Zero Install</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  <link href="../../style.css" rel="stylesheet">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Manifest files";
    var mkdocs_page_input_path = "specifications/manifest.md";
    var mkdocs_page_url = "/specifications/manifest/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Zero Install</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../..">About</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../comparison/">Comparison</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../faq/">FAQ</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../features/">Features</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../perspectives/">Perspectives</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../troubleshooting/">Trouble-shooting</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Basics</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../basics/">Introduction</a>
                </li>
                <li class="">
                    
    <a class="" href="../../basics/first-launch/">First launch</a>
                </li>
                <li class="">
                    
    <a class="" href="../../basics/making-shortcuts/">Making shortcuts</a>
                </li>
                <li class="">
                    
    <a class="" href="../../basics/using-apps/">Using apps</a>
                </li>
                <li class="">
                    
    <a class="" href="../../basics/windows/">Desktop integration</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Details</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../details/">Manual walk-through</a>
                </li>
                <li class="">
                    
    <a class="" href="../../details/cache/">Cache and sharing</a>
                </li>
                <li class="">
                    
    <a class="" href="../../details/cli/">Command-line interface</a>
                </li>
                <li class="">
                    
    <a class="" href="../../details/distribution-integration/">Distribution integration</a>
                </li>
                <li class="">
                    
    <a class="" href="../../details/export/">Export</a>
                </li>
                <li class="">
                    
    <a class="" href="../../details/file-locations/">File locations</a>
                </li>
                <li class="">
                    
    <a class="" href="../../details/os-differences/">OS-specific differences</a>
                </li>
                <li class="">
                    
    <a class="" href="../../details/policy-settings/">Policy settings</a>
                </li>
                <li class="">
                    
    <a class="" href="../../details/security/">Security</a>
                </li>
                <li class="">
                    
    <a class="" href="../../details/servers/">Servers</a>
                </li>
                <li class="">
                    
    <a class="" href="../../details/sharing/">Sharing downloads between users</a>
                </li>
                <li class="">
                    
    <a class="" href="../../details/sync/">Sync</a>
                </li>
                <li class="">
                    
    <a class="" href="../../details/virtual-machines/">Virtual machines</a>
                </li>
                <li class="">
                    
    <a class="" href="../../details/windows/">Zero Install for Windows</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Developers</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../developers/">Overview</a>
                </li>
                <li class="">
                    
    <a class="" href="../../developers/design/">Design</a>
                </li>
                <li class="">
                    
    <a class="" href="../../developers/dotnet-api/">.NET API</a>
                </li>
                <li class="">
                    
    <a class="" href="../../developers/json-api/">JSON API</a>
                </li>
                <li class="">
                    
    <a class="" href="../../developers/python-api/">Python API</a>
                </li>
                <li class="">
                    
    <a class="" href="../../developers/solver/">The Solver</a>
                </li>
                <li class="">
                    
    <a class="" href="../../developers/using-git/">Using Git</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Packaging</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../packaging/">Overview</a>
                </li>
                <li class="">
                    
    <a class="" href="../../packaging/concepts/">Concepts</a>
                </li>
                <li class="">
                    
    <a class="" href="../../packaging/guide-cli/">Packaging guide (command-line)</a>
                </li>
                <li class="">
                    
    <a class="" href="../../packaging/guide-gui/">Packaging guide (graphical)</a>
                </li>
                <li class="">
                    
    <a class="" href="../../packaging/local-feeds/">Local feeds</a>
                </li>
                <li class="">
                    
    <a class="" href="../../packaging/templates/">Templates</a>
                </li>
                <li class="">
                    
    <span class="caption-text">Examples</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../packaging/examples/dotnet-lib/">.NET library</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../packaging/examples/find/">Find</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../packaging/examples/inkscape/">Inkscape</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../packaging/examples/rox/">ROX-Filer</a>
                </li>
    </ul>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Specifications</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../">Overview</a>
                </li>
                <li class="">
                    
    <a class="" href="../capabilities/">Capabilities extension</a>
                </li>
                <li class="">
                    
    <a class="" href="../catalog/">Catalog files</a>
                </li>
                <li class="">
                    
    <a class="" href="../feed/">Feed files</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="./">Manifest files</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#algorithms">Algorithms</a></li>
    

    <li class="toctree-l3"><a href="#manifest-file-format">Manifest file format</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#directories">Directories</a></li>
        
            <li><a class="toctree-l4" href="#files">Files</a></li>
        
            <li><a class="toctree-l4" href="#symlinks">Symlinks</a></li>
        
            <li><a class="toctree-l4" href="#other-files-types">Other files types</a></li>
        
            <li><a class="toctree-l4" href="#ordering">Ordering</a></li>
        
        </ul>
    

    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../selections/">Selections files</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Tools</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../tools/">Overview</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/0bootstrap/">0bootstrap</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/0compile/">0compile</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/0export/">0export</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/0mirror/">0mirror</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/0publish-win/">0publish-win</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/0publish/">0publish</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/0release/">0release</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/0repo/">0repo</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/0share/">0share</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/0template/">0template</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/0test/">0test</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/0watch/">0watch</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/ebox/">ebox</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/feedlint/">FeedLint</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/make-headers/">Make-headers</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/pkg2zero/">pkg2zero</a>
                </li>
                <li class="">
                    
    <span class="caption-text">0compile</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../tools/0compile/chroot-build/">Chroot build</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../tools/0compile/developers/">Developers</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../tools/0compile/example-scons/">Example: SCons</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">0release</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../tools/0release/compiled-binaries/">Compiled binaries</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../tools/0release/customisation/">Customisation</a>
                </li>
    </ul>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Zero Install</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Specifications &raquo;</li>
        
      
    
    <li>Manifest files</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/0install/docs/edit/master/docs/specifications/manifest.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <p>Zero Install <em>implementations</em> are directory trees identified by an algorithm name (e.g., "sha256"), and digest of their contents calculated using that algorithm. Adding, deleting, renaming or modifying any file in a tree will change its digest. It should be infeasibly difficult to generate a new tree with the same digest as a given tree. Thus, if you know the digest of the implementation you want, and someone gives you a tree with that digest, you can trust that it is the implementation you want.</p>
<p>This document describes how a digest is calculated from a directory tree.</p>
<p><strong>Contents:</strong></p>
<div class="toc">
<ul>
<li><a href="#algorithms">Algorithms</a></li>
<li><a href="#manifest-file-format">Manifest file format</a><ul>
<li><a href="#directories">Directories</a></li>
<li><a href="#files">Files</a></li>
<li><a href="#symlinks">Symlinks</a></li>
<li><a href="#other-files-types">Other files types</a></li>
<li><a href="#ordering">Ordering</a></li>
</ul>
</li>
</ul>
</div>
<h2 id="algorithms">Algorithms</h2>
<p>There are several different algorithms that can be used to generate a digest from a directory tree, so an implementation's identifier includes the algorithm. This allows new algorithms to be added easily if weaknesses are discovered in older ones. The currently supported algorithms are:</p>
<dl>
<dt><code>sha1=XXX</code></dt>
<dd>This is supported by all versions of 0install. It is less secure than the format used with the other algorithms.</dd>
<dt><code>sha1new=XXX</code></dt>
<dd>Supported from version 0.20. This is the same hash as <code>sha1</code> but with the new manifest format.</dd>
<dt><code>sha256=XXX</code></dt>
<dd>Supported from version 0.20 and also requires the <code>hashlib</code> Python module to be installed.</dd>
<dt><code>sha256new_XXX</code></dt>
<dd>Supported from version 1.10. This is the same as <code>sha256</code>, except that the final digest is <a href="http://en.wikipedia.org/wiki/Base32">base32-encoded</a> (without padding) to make it a bit shorter, and the separator character is <code>_</code> rather than <code>=</code>, as pathnames containing <code>=</code> cause problems for some programs.</dd>
</dl>
<p>When checking a new tree (e.g., that has just been downloaded from the net and unpacked), 0install generates a 'manifest' file. The manifest lists every file, directory and symlink in the tree, and gives the digest of each file's content. Here is a sample manifest file for a tree containing two files (<code>README</code> and <code>src/main.c</code>) and using the <code>sha1</code> algorithm (you can use <code>0store manifest</code> to generate this):</p>
<pre><code class="plain">F 0a4d55a8d778e5022fab701977c5d840bbc486d0 1132502750 11 README
D 1132502769 /src
F 83832457b29a423c8e6daf05c6dbcba17d0514dd 1132502769 17 main.c
</code></pre>

<p>If you generate a manifest file for a directory tree and find that it is identical to the manifest file you want, then you can feel confident that you have the tree you want. This is convenient, because the manifest file is much smaller than the packaged tree.</p>
<p>After checking, the generated manifest file is stored in a file called <code>.manifest</code> in the top-level of the tree.</p>
<p>To save even more space, we can simply compare the <em>digests</em> (rather than the <em>contents</em>) of these manifest files. For example, the digest of the three-line manifest file above is given by:</p>
<pre><code class="shell">$ sha1sum .manifest
b848561cd89be1b806ee00008a503c63eb4ad56e
</code></pre>

<p>When 0install adds a new archive to the cache, the top-level directory is renamed to this final digest (so the <code>main.c</code> above would be stored as <code>.../sha1=b848561cd89be1b806ee00008a503c63eb4ad56e/src/main.c</code>, for example).</p>
<p>Because only the digest of the manifest is needed, it is not strictly necessary to store the <code>.manifest</code> file at all. However, if the tree is modified later somehow it can show you exactly which files were changed (rather than just letting you know that the tree has changed in some unknown way).</p>
<h1 id="manifest-file-format">Manifest file format</h1>
<p>This description of the manifest file is based on Joachim's 12 Oct 2005 post to the zero-install-devel list:</p>
<p>The manifest file lists, line by line, all nodes in a directory identified as <code>/</code>, without <code>/</code> itself. All relevant numbers are coded as decimal numbers without leading zeros (unless 0 is to be coded, which is coded as <code>0</code>). Times are represented as the number of seconds since the epoch. Nodes are of one of their possible types: <code>D</code>, <code>F</code>, <code>X</code>, and <code>S</code>. Names must not contain newline characters (the tree will be rejected if they do).</p>
<p>The file itself is encoded as UTF-8, with Unix line-endings (<code>\n</code>) and no <a href="http://en.wikipedia.org/wiki/Byte-order_mark">BOM</a>. Note that some operating systems treat filenames as sequences of bytes (rather than as sequences of characters), and thus may be able to handle filenames which cannot be represented as strings. A Zero Install implementation cannot contain such filenames.</p>
<h2 id="directories">Directories</h2>
<p><code>D</code> nodes correspond to directories, and their line format is:</p>
<pre><code class="plain">&quot;D&quot;, space, [mtime, space,] full path name, newline
</code></pre>

<p>So, top level directories, for example, would have a "full path name" that matches the regular expression <code>^/[^/\n]+$</code>.</p>
<p>The modification time is only included when using the original <code>sha1</code> algorithm, as it was not found to be useful and caused problems with many archives.</p>
<h2 id="files">Files</h2>
<p><code>F</code> and <code>X</code> nodes correspond to files and executable files, respectively, and their line formats are:</p>
<pre><code class="plain">&quot;F&quot;, space, hash, space, mtime, space, size, space, file name, newline
&quot;X&quot;, space, hash, space, mtime, space, size, space, file name, newline
</code></pre>

<p>As opposed to directories, no full path names are given. Hence, file names match <code>^[^/\n]+$</code> . The hash is the hexadecimal representation of the digest of the contents of the respective file, using the same digest algorithm as the manifest file itself. Hexadecimal digits a through f are used (rather than A through F).</p>
<h2 id="symlinks">Symlinks</h2>
<p><code>S</code> nodes correspond to symbolic links, and their line format is:</p>
<pre><code class="plain">&quot;S&quot;, space, hash, space, size, space, symlink name, newline
</code></pre>

<p>The symlink name is given analogously to file names in <code>F</code> and <code>X</code> nodes. The size of a symlink is the number of bytes in its target (name). The hash sum, similarly to that of files, is the digest of the target (name) of the respective symlink.</p>
<h2 id="other-files-types">Other files types</h2>
<p>It is an error for a tree to contain other types of object (such as device files). Such trees are rejected.</p>
<h2 id="ordering">Ordering</h2>
<p>These lines appear in the order of a depth-first search. Within a directory, regular files and symlinks come first (ordered lexicographically by their name, i.e., they appear in the order that <code>LC_ALL=C sort</code> would produce), and then each subdirectory (again sorted in the same way).</p>
<p>For the original <code>sha1</code> algorithm the sort order is slightly different: sub-directories, regular files and symlinks are all sorted together rather than the subdirectories always coming after other types.</p>
<p>Implementations have to abide by these rules to the letter because such a file is to be generated automatically and this process absolutely must generate the same file that the directory tree packager had computed.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../selections/" class="btn btn-neutral float-right" title="Selections files">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../feed/" class="btn btn-neutral" title="Feed files"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/0install/docs/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../feed/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../selections/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../menu.js" defer></script>
      <script src="../../search/main.js" defer></script>

</body>
</html>
