<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../img/logo.png">
  
  <title>Virtual machines - Zero Install</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  <link href="../../style.css" rel="stylesheet">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Virtual machines";
    var mkdocs_page_input_path = "details/virtual-machines.md";
    var mkdocs_page_url = "/details/virtual-machines/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Zero Install</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../..">About</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../comparison/">Comparison</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../faq/">FAQ</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../features/">Features</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../perspectives/">Perspectives</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../troubleshooting/">Trouble-shooting</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Basics</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../basics/">Introduction</a>
                </li>
                <li class="">
                    
    <a class="" href="../../basics/first-launch/">First launch</a>
                </li>
                <li class="">
                    
    <a class="" href="../../basics/making-shortcuts/">Making shortcuts</a>
                </li>
                <li class="">
                    
    <a class="" href="../../basics/using-apps/">Using apps</a>
                </li>
                <li class="">
                    
    <a class="" href="../../basics/windows/">Desktop integration</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Details</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../">Manual walk-through</a>
                </li>
                <li class="">
                    
    <a class="" href="../cache/">Cache and sharing</a>
                </li>
                <li class="">
                    
    <a class="" href="../cli/">Command-line interface</a>
                </li>
                <li class="">
                    
    <a class="" href="../distribution-integration/">Distribution integration</a>
                </li>
                <li class="">
                    
    <a class="" href="../export/">Export</a>
                </li>
                <li class="">
                    
    <a class="" href="../file-locations/">File locations</a>
                </li>
                <li class="">
                    
    <a class="" href="../os-differences/">OS-specific differences</a>
                </li>
                <li class="">
                    
    <a class="" href="../policy-settings/">Policy settings</a>
                </li>
                <li class="">
                    
    <a class="" href="../security/">Security</a>
                </li>
                <li class="">
                    
    <a class="" href="../servers/">Servers</a>
                </li>
                <li class="">
                    
    <a class="" href="../sharing/">Sharing downloads between users</a>
                </li>
                <li class="">
                    
    <a class="" href="../sync/">Sync</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="./">Virtual machines</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#virtualbox">VirtualBox</a></li>
    

    <li class="toctree-l3"><a href="#vagrant">Vagrant</a></li>
    

    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../windows/">Zero Install for Windows</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Developers</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../developers/">Overview</a>
                </li>
                <li class="">
                    
    <a class="" href="../../developers/design/">Design</a>
                </li>
                <li class="">
                    
    <a class="" href="../../developers/dotnet-api/">.NET API</a>
                </li>
                <li class="">
                    
    <a class="" href="../../developers/json-api/">JSON API</a>
                </li>
                <li class="">
                    
    <a class="" href="../../developers/python-api/">Python API</a>
                </li>
                <li class="">
                    
    <a class="" href="../../developers/solver/">The Solver</a>
                </li>
                <li class="">
                    
    <a class="" href="../../developers/using-git/">Using Git</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Packaging</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../packaging/">Overview</a>
                </li>
                <li class="">
                    
    <a class="" href="../../packaging/concepts/">Concepts</a>
                </li>
                <li class="">
                    
    <a class="" href="../../packaging/guide-cli/">Packaging guide (command-line)</a>
                </li>
                <li class="">
                    
    <a class="" href="../../packaging/guide-gui/">Packaging guide (graphical)</a>
                </li>
                <li class="">
                    
    <a class="" href="../../packaging/local-feeds/">Local feeds</a>
                </li>
                <li class="">
                    
    <a class="" href="../../packaging/templates/">Templates</a>
                </li>
                <li class="">
                    
    <span class="caption-text">Examples</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../packaging/examples/dotnet-lib/">.NET library</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../packaging/examples/find/">Find</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../packaging/examples/inkscape/">Inkscape</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../packaging/examples/rox/">ROX-Filer</a>
                </li>
    </ul>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Specifications</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../specifications/">Overview</a>
                </li>
                <li class="">
                    
    <a class="" href="../../specifications/capabilities/">Capabilities extension</a>
                </li>
                <li class="">
                    
    <a class="" href="../../specifications/catalog/">Catalog files</a>
                </li>
                <li class="">
                    
    <a class="" href="../../specifications/feed/">Feed files</a>
                </li>
                <li class="">
                    
    <a class="" href="../../specifications/manifest/">Manifest files</a>
                </li>
                <li class="">
                    
    <a class="" href="../../specifications/selections/">Selections files</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Tools</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../tools/">Overview</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/0bootstrap/">0bootstrap</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/0compile/">0compile</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/0export/">0export</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/0mirror/">0mirror</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/0publish-win/">0publish-win</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/0publish/">0publish</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/0release/">0release</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/0repo/">0repo</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/0share/">0share</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/0template/">0template</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/0test/">0test</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/0watch/">0watch</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/ebox/">ebox</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/feedlint/">FeedLint</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/make-headers/">Make-headers</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tools/pkg2zero/">pkg2zero</a>
                </li>
                <li class="">
                    
    <span class="caption-text">0compile</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../tools/0compile/chroot-build/">Chroot build</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../tools/0compile/developers/">Developers</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../tools/0compile/example-scons/">Example: SCons</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">0release</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../tools/0release/compiled-binaries/">Compiled binaries</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../tools/0release/customisation/">Customisation</a>
                </li>
    </ul>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Zero Install</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Details &raquo;</li>
        
      
    
    <li>Virtual machines</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/0install/docs/edit/master/docs/details/virtual-machines.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <p>As well as allowing sharing between users, you can also use Zero Install to share packages between virtual machines. That is, the package is downloaded and stored once, but all virtual machines can run it.</p>
<div class="toc">
<ul>
<li><a href="#virtualbox">VirtualBox</a></li>
<li><a href="#vagrant">Vagrant</a></li>
</ul>
</div>
<h2 id="virtualbox">VirtualBox</h2>
<p><a href="http://www.virtualbox.org/">VirtualBox</a> is a popular free (GPL) virtualisation system. To share your host's cache with a guest:</p>
<ul>
<li>Create a new guest and install an operating system as usual. The guest OS does not need to be the same as the host OS.</li>
<li>Install the guest tools (choose <strong>Install Guest Additions...</strong> from the <strong>Devices</strong> menu).</li>
<li>Add a shared folder. <strong>Folder Path</strong> is your implementation cache on the host. This will be <code>/var/cache/0install.net/implementations</code> if you have <a href="../sharing/">sharing</a> enabled, or <code>~/.cache/0install.net/implementations</code> if not. <strong>Folder Name</strong> can be anything, e.g. <strong>ZeroInstall</strong>.</li>
<li>In the guest, mount the new file-system under <code>/var/cache/0install.net/implementations</code> (regardless of where it is on the host):</li>
</ul>
<pre><code class="shell">$ sudo mount -t vboxsf ZeroInstall /var/cache/0install.net/implementations
</code></pre>

<p>Notes:</p>
<ol>
<li>
<p>If you used the host's <code>/var/cache</code> directory then the guest won't be able to write to the host's cache, which is good for security. Anything installed by the guest will be available only on that guest. If you want to configure sharing between guest users, however, you'll need to configure a second shared directory, one for guest-wide packages and one for host packages (<code>man 0store</code> for details).</p>
</li>
<li>
<p>If you shared the <code>~/.cache</code> directory, then root in the guest will be able to write to the host cache, which is good for sharing but not so good for security. If you also configure <a href="../sharing/">sharing</a> in the guest, then guest users can install to the host's cache. Here, you are trusting the guest OS to check the digests correctly.</p>
</li>
<li>
<p>It is also possible (though more difficult) to set things up so that an untrusted guest OS can put things in the host's cache (verified by the host). For this, you will need to make your own version of the <code>0store-secure-add-helper</code> script that passes the directory to the host for verification.</p>
</li>
<li>
<p>Because Zero Install packages are named by their digest, there are no problems with sharing a single cache between different architectures (whether virtual machines or physical machines with a network file-system). Packages that can be shared will be shared automatically, packages that can't will co-exist peacefully.</p>
</li>
</ol>
<p>Warning: Older versions of the VirtualBox guest additions have problems with symlinks in shared folders. If you allow guests to write to a shared cache on the host, you may get the error <code>Incorrect manifest -- archive is corrupted</code>, even though the archive is actually OK. Guest additions 4.0.4 is known to not work. Version 4.2.0 seems fine.</p>
<h2 id="vagrant">Vagrant</h2>
<p><a href="http://www.vagrantup.com/">Vagrant</a> is a tool for managing virtual development environments using VirtualBox.</p>
<p>In your Vagrantfile, use something like this:</p>
<pre><code class="vagrantfile">Vagrant::Config.run do |config|
  [...]
  config.vm.share_folder &quot;host-cache&quot;,
             &quot;/var/cache/0install.net/implementations&quot;,
             &quot;/var/cache/0install.net/implementations&quot;

  # This next bit is convenient but less secure...

  config.vm.customize [&quot;setextradata&quot;, :id,
    &quot;VBoxInternal2/SharedFoldersEnableSymlinksCreate/shared-guest-cache&quot;, &quot;1&quot;]
  config.vm.share_folder &quot;shared-guest-cache&quot;,
    &quot;/home/vagrant/.cache/0install.net/implementations&quot;,
    &quot;/home/me/.cache/shared-vagrant-guest-cache&quot;
end
</code></pre>

<p>or, for later versions:</p>
<pre><code class="vagrantfile">Vagrant.configure(VAGRANTFILE_API_VERSION) do |config|
  [...]
  config.vm.synced_folder &quot;/var/cache/0install.net/implementations&quot;,
              &quot;/var/cache/0install.net/implementations&quot;

  # This next bit is convenient but less secure...

  config.vm.provider :virtualbox do |vb|
    vb.customize [&quot;setextradata&quot;, :id,
      &quot;VBoxInternal2/SharedFoldersEnableSymlinksCreate/shared-guest-cache&quot;, &quot;1&quot;]
  end

  config.vm.synced_folder &quot;/home/me/.cache/shared-vagrant-guest-cache&quot;,
              &quot;/home/vagrant/.cache/0install.net/implementations&quot;
end
</code></pre>

<p>Change the <code>/home/me/.cache/shared-vagrant-guest-cache</code> line to the path where you want to store the shared cache on the host. Ensure you have version 4.2.0 or later of the guest additions installed, or symlinks might not work.</p>
<p>Here, the VMs will have read-only access to the host's cache (assuming you've set up <a href="../sharing/">sharing</a> on the host), plus read-write access to a cache shared between the guests. Note that a malicious guest can corrupt this cache, and thus affect other VMs using it. However, assuming non-malicious guests, there is no problem sharing the cache between different VM types (e.g. Debian, Fedora, 32-bit, 64-bit, etc).</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../windows/" class="btn btn-neutral float-right" title="Zero Install for Windows">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../sync/" class="btn btn-neutral" title="Sync"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/0install/docs/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../sync/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../windows/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../menu.js" defer></script>
      <script src="../../search/main.js" defer></script>

</body>
</html>
